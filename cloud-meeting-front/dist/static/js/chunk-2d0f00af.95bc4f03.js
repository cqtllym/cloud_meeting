(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0f00af"],{"9b4d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{attrs:{"body-style":{padding:"24px 32px",paddingBottom:"64px"},bordered:!1}},[t.isRouterAlive?a("a-tabs",{attrs:{"default-active-key":"1"}},["founder"===t.role||"admin"===t.role?a("a-tab-pane",{key:"1"},[a("span",{attrs:{slot:"tab"},on:{click:t.searchCompanyNotice},slot:"tab"},[t._v("企业消息 ")]),a("a-list",{attrs:{"item-layout":"vertical",size:"large",pagination:t.pagination,"data-source":t.list},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{key:"item.title"},[a("a-list-item-meta",[a("span",{attrs:{slot:"title"},slot:"title"},["已处理"==e.isDealt?a("a-icon",{attrs:{type:"pushpin"}}):t._e(),"已处理"!=e.isDealt?a("a-icon",{attrs:{type:"alert"}}):t._e(),t._v(" "+t._s(e.theme)+" "),"已处理"!=e.isDealt&&"同意拒绝"==e.type?a("a-button",{staticStyle:{float:"right"},attrs:{type:"link"},on:{click:function(a){return t.deal(e.id,!1,e.fromType)}}},[t._v("拒绝")]):t._e(),"已处理"!=e.isDealt&&"同意拒绝"==e.type?a("a-button",{staticStyle:{float:"right"},attrs:{type:"link"},on:{click:function(a){return t.deal(e.id,!0,e.fromType)}}},[t._v("接受")]):t._e(),"已处理"!=e.isDealt&&"只读通知"==e.type?a("a-button",{staticStyle:{float:"right"},attrs:{type:"link"},on:{click:function(a){return t.deal(e.id,!1,e.fromType)}}},[t._v("确认")]):t._e()],1)]),t._v(" 发送方："+t._s(e.fromName)+"    时间："+t._s(e.createTime)+" ")],1)}}],null,!1,4272784193)})],1):t._e(),a("a-tab-pane",{key:"2"},[a("span",{attrs:{slot:"tab"},on:{click:t.searchUserNotice},slot:"tab"},[t._v("个人消息 ")]),a("a-list",{attrs:{"item-layout":"vertical",size:"large",pagination:t.pagination,"data-source":t.listData},scopedSlots:t._u([{key:"renderItem",fn:function(e){return a("a-list-item",{key:"item.title"},[a("a-list-item-meta",[a("span",{attrs:{slot:"title"},slot:"title"},["已处理"==e.isDealt?a("a-icon",{attrs:{type:"pushpin"}}):t._e(),"已处理"!=e.isDealt?a("a-icon",{attrs:{type:"alert"}}):t._e(),t._v(" "+t._s(e.theme)+" "),"已处理"!=e.isDealt&&"同意拒绝"==e.type&&"user"==t.role?a("a-button",{staticStyle:{float:"right"},attrs:{type:"link"},on:{click:function(a){return t.deal(e.id,!1,e.fromType,e.fromName)}}},[t._v("拒绝")]):t._e(),"已处理"!=e.isDealt&&"同意拒绝"==e.type&&"user"==t.role?a("a-button",{staticStyle:{float:"right"},attrs:{type:"link"},on:{click:function(a){return t.deal(e.id,!0,e.fromType,e.fromName)}}},[t._v("接受")]):t._e(),"已处理"!=e.isDealt&&"只读通知"==e.type?a("a-button",{staticStyle:{float:"right"},attrs:{type:"link"},on:{click:function(a){return t.dealRead(e.id,!0)}}},[t._v("确认")]):t._e(),"已处理"!=e.isDealt&&"加入会议"==e.type?a("a-button",{staticStyle:{float:"right"},attrs:{type:"link"},on:{click:function(a){return t.deal(e.id,!0,e.fromType)}}},[t._v("去开会")]):t._e(),"已处理"!=e.isDealt&&"加入会议"==e.type?a("a-button",{staticStyle:{float:"right"},attrs:{type:"link"},on:{click:function(a){return t.deal(e.id,!1,e.fromType)}}},[t._v("忽略")]):t._e()],1)]),t._v(" 发送方："+t._s(e.fromName)+"   时间："+t._s(e.createTime)+" ")],1)}}],null,!1,3236898355)})],1)],1):t._e()],1)},n=[],s=a("f3f3"),o=a("2d65"),r=a("5880"),c={provide:function(){return{reload:this.reload}},data:function(){return{listData:[],list:[],pagination:{onChange:function(t){},pageSize:5},role:"",isRouterAlive:!0,num:0}},computed:Object(s["a"])({},Object(r["mapGetters"])("account",["username","userId","roles","companyId","count"])),beforeMount:function(){this.searchUserNotice(),this.searchCompanyNotice(),this.countUnreadNotice()},created:function(){this.role=this.roles[0].id},methods:Object(s["a"])(Object(s["a"])({reload:function(){this.isRouterAlive=!1,this.$nextTick((function(){this.isRouterAlive=!0}))}},Object(r["mapMutations"])("account",["setUserName","setUserId","setCompanyName","setCompanyId","setSex","setTelephone","setRoles","setCount"])),{},{searchUserNotice:function(){Object(o["f"])(this.userId).then(this.showListData)},showListData:function(t){this.listData=t.data.data},searchCompanyNotice:function(){null!=this.companyId&&Object(o["a"])(this.companyId).then(this.showList)},showList:function(t){this.list=t.data.data},deal:function(t,e,a,i){var n=this;"个人"==a?Object(o["b"])(t,e).then(this.afterDealApplication):Object(o["c"])(t,e).then((function(t){var a=t.data;if(200==a.code)if(n.$message.success("已处理该消息！"),n.countUnreadNotice(),1==e){var s=[{id:"employee"}];n.setCompanyName(i),n.setRoles(s),n.$router.push({path:"/resourceManagement/information"})}else n.searchUserNotice()}))},dealRead:function(t,e){var a=this;Object(o["d"])(t,e).then((function(t){var e=t.data;200==e.code&&(a.$message.success("已处理该消息！"),a.searchUserNotice(),a.countUnreadNotice())}))},afterDealApplication:function(t){var e=t.data;200==e.code&&(this.$message.success("已处理该消息！"),this.searchCompanyNotice(),this.countUnreadNotice())},countUnreadNotice:function(){var t=this;Object(o["e"])(this.userId).then((function(e){var a=e.data;200==a.code&&(t.num=a.data,t.setCount(t.num))}))}})},l=c,u=a("2877"),d=Object(u["a"])(l,i,n,!1,null,"7b985d02",null);e["default"]=d.exports}}]);