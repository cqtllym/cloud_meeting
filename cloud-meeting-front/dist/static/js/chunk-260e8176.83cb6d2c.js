(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-260e8176"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"16ee":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{"body-style":{padding:"24px 32px",textAlign:"left"}}},[n("a-row",[n("a-col",{attrs:{span:6}},[e._v(" 部门 "),n("a-tree",{attrs:{"load-data":e.onLoadData,"tree-data":e.treeData}}),n("a-divider",{attrs:{type:"vertical"}})],1),n("a-col",{attrs:{span:18}},[n("a-row",[n("a-tabs",{attrs:{"default-active-key":"1"}},[n("a-tab-pane",{key:"1"},[n("span",{attrs:{slot:"tab"},on:{click:e.search},slot:"tab"},[n("a-icon",{attrs:{type:"apple"}}),e._v(" 用户 ")],1),"founder"==e.role||"admin"==e.role?n("div",{staticStyle:{"margin-bottom":"16px"}},[n("a-button",{attrs:{type:"primary",disabled:e.hasSelected,loading:e.loading},on:{click:e.invite}},[e._v(" 邀请 ")]),n("a-button",{staticStyle:{"margin-left":"5%"},attrs:{type:"danger",disabled:!e.hasSelected,loading:e.loading},on:{click:e.deleted}},[e._v(" 解雇 ")]),n("a-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入员工姓名"},on:{search:e.onSearch},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}}),n("span",{staticStyle:{"margin-left":"8px"}},[e.hasSelected?[e._v(" "+e._s("选中 "+e.selectedRowKeys.length+" 条数据")+" ")]:e._e()],2)],1):e._e(),n("a-table",{attrs:{bordered:"",rowKey:function(e,t){return e.userId},"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},columns:e.columns,"data-source":e.data,scroll:{x:1500,y:300}},scopedSlots:e._u([{key:"roles",fn:function(t){return n("div",{},["founder"==t[0].id?n("p",[e._v("创始人")]):e._e(),"employee"==t[0].id?n("p",[e._v("员工")]):e._e(),"admin"==t[0].id?n("p",[e._v("管理员")]):e._e()])}},{key:"action",fn:function(t){return"founder"==e.role||"admin"==e.role?n("div",{},[n("a",{on:{click:e.edit}},[e._v("修改")]),n("a",{staticStyle:{"margin-left":"7%"},on:{click:function(n){return e.fire(t.userId)}}},[e._v(" 解雇 ")])]):e._e()}}],null,!0)}),n("a-modal",{attrs:{title:"更改员工部门",visible:e.visible,"confirm-loading":e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[n("a-form",{attrs:{form:e.form}},[n("a-form-item",{ref:"department",attrs:{label:"选择部门",prop:"department"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["department",{initialValue:"       "}],expression:"['department', { initialValue: '       ' }]"}]},[n("a-select-option",{attrs:{value:"Option1"}},[e._v(" Option1 ")]),n("a-select-option",{attrs:{value:"Option2"}},[e._v(" Option2 ")])],1)],1)],1)],1)],1),n("a-tab-pane",{key:"2"},[n("span",{attrs:{slot:"tab"},slot:"tab"},[n("a-icon",{attrs:{type:"android"},on:{click:e.searchAdmin}}),e._v(" 管理员 ")],1),"founder"==e.role?n("div",{staticStyle:{"margin-bottom":"16px"}},[n("a-button",{attrs:{type:"primary",disabled:e.hasAdminSelected,loading:e.loading},on:{click:e.addManager}},[e._v(" 添加 ")])],1):e._e(),n("a-table",{attrs:{bordered:"",columns:e.columns,"data-source":e.dataAdmin,scroll:{x:1500,y:300}},scopedSlots:e._u([{key:"roles",fn:function(t){return n("div",{},["founder"==t[0].id?n("p",[e._v("创始人")]):e._e(),"employee"==t[0].id?n("p",[e._v("员工")]):e._e(),"admin"==t[0].id?n("p",[e._v("管理员")]):e._e()])}},{key:"action",fn:function(t,r){return"founder"==e.role?n("a",{on:{click:function(t){return e.deleteAdmin(r.userId)}}},[e._v("移除")]):e._e()}}],null,!0)})],1)],1)],1)],1)],1)],1)},a=[],i=n("d0ff"),c=n("f3f3"),o=(n("ac1f"),n("841c"),n("a15b"),n("d3b7"),n("5880")),u=n("e3fa"),s=[{title:"姓名",width:150,dataIndex:"username",key:"username",fixed:"left"},{title:"角色",key:"roles",dataIndex:"roles",scopedSlots:{customRender:"roles"}},{title:"性别",dataIndex:"sex",key:1},{title:"部门",dataIndex:"department",key:2},{title:"手机",dataIndex:"telephone",key:3},{title:"邮箱",dataIndex:"email",key:4},{title:"状态",dataIndex:"status",key:5},{title:"操作",key:"operation",fixed:"right",width:100,scopedSlots:{customRender:"action"}}],d={name:"person",data:function(){return{data:[],dataAdmin:[],columns:s,selectedRowKeys:[],loading:!1,treeData:[{title:"云会议",key:"0"}],visible:!1,AdminVisible:!1,confirmLoading:!1,person:[],role:"",searchName:""}},computed:Object(c["a"])({hasSelected:function(){return this.selectedRowKeys.length>0}},Object(o["mapGetters"])("account",["username","userId","companyId","roles"])),beforeCreate:function(){this.form=this.$form.createForm(this)},created:function(){this.role=this.roles[0].id,this.fetchPerson(),this.fetchAdmin()},methods:{fetchPerson:function(){var e=this;Object(u["f"])(this.companyId).then((function(t){e.data=t.data.data})),this.searchName=""},fetchAdmin:function(){var e=this;Object(u["d"])(this.companyId).then((function(t){e.dataAdmin=t.data.data}))},invite:function(){this.$router.push({path:"/resourceManagement/invite"})},addManager:function(){this.$router.push({path:"/resourceManagement/manager"})},edit:function(){this.visible=!0},handleOk:function(){this.form.validateFieldsAndScroll((function(e,t){}))},handleCancel:function(){this.visible=!1},search:function(){this.fetchPerson()},searchAdmin:function(){this.fetchAdmin()},onSearch:function(e){var t=this;""!=e?Object(u["m"])(e,this.companyId).then((function(e){var n=e.data;200==n.code&&(t.data=e.data.data,t.searchName="")})):this.search()},deleted:function(){var e=this,t=this.selectedRowKeys.join();this.$confirm({title:"你确定要解雇这些员工吗？",onOk:function(){Object(u["g"])(e.companyId,t).then((function(t){var n=t.data;200==n.code?(e.$message.success("解雇成功！"),e.selectedRowKeys=[],e.search()):601==n.code&&(e.$message.error(n.errMsg),e.selectedRowKeys=[],e.search())}))},onCancel:function(){}})},fire:function(e){var t=this;this.$confirm({title:"你确定要解雇该员工吗？",onOk:function(){Object(u["g"])(t.companyId,e).then((function(e){var n=e.data;200==n.code?(t.$message.success("解雇成功！"),t.search()):601==n.code&&(t.$message.error(n.errMsg),t.search())}))},onCancel:function(){}})},deleteAdmin:function(e){var t=this;Object(u["b"])(e,this.companyId).then((function(e){var n=e.data;200==n.code&&(t.$message.success("移除成功！"),t.searchAdmin())}))},onSelectChange:function(e){this.selectedRowKeys=e},onLoadData:function(e){var t=this;return new Promise((function(n){e.dataRef.children?n():setTimeout((function(){e.dataRef.children=[{title:"Child Node",key:"".concat(e.eventKey,"-0")},{title:"Child Node",key:"".concat(e.eventKey,"-1")}],t.treeData=Object(i["a"])(t.treeData),n()}),1e3)}))}}},l=d,p=(n("a959"),n("2877")),f=Object(p["a"])(l,r,a,!1,null,"1f1a5cb6",null);t["default"]=f.exports},"79d1":function(e,t,n){},"841c":function(e,t,n){"use strict";var r=n("d784"),a=n("825a"),i=n("1d80"),c=n("129f"),o=n("14c3");r("search",(function(e,t,n){return[function(t){var n=i(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,this,e);if(r.done)return r.value;var i=a(this),u=String(e),s=i.lastIndex;c(s,0)||(i.lastIndex=0);var d=o(i,u);return c(i.lastIndex,s)||(i.lastIndex=s),null===d?-1:d.index}]}))},a959:function(e,t,n){"use strict";n("79d1")},e3fa:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"n",(function(){return p})),n.d(t,"f",(function(){return h})),n.d(t,"m",(function(){return y})),n.d(t,"o",(function(){return w})),n.d(t,"b",(function(){return g})),n.d(t,"e",(function(){return R})),n.d(t,"d",(function(){return k})),n.d(t,"k",(function(){return x})),n.d(t,"i",(function(){return S})),n.d(t,"c",(function(){return T})),n.d(t,"j",(function(){return C})),n.d(t,"l",(function(){return P})),n.d(t,"g",(function(){return K}));var r=n("c964"),a=(n("96cf"),n("7424")),i=n("b775"),c=n("4328"),o=n.n(c);function u(e,t,n,r){return s.apply(this,arguments)}function s(){return s=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r,c){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["CREATE_COMPANY"],i["a"].PUT,o.a.stringify({companyName:n,userId:t,companyAddress:r,companyType:c}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function d(e,t){return l.apply(this,arguments)}function l(){return l=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["INVITE_PERSON"],i["a"].GET,{company_id:n,user_id:t}));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["SEARCH_PERSON"],i["a"].GET,{keyword:t}));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["FETCH_PERSON"],i["a"].GET,{company_id:t}));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function y(e,t){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["SEARCH_INFORMATION"],i["a"].GET,{userName:t,companyId:n}));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function w(e,t){return v.apply(this,arguments)}function v(){return v=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["SET_ADMIN"],i["a"].PUT,o.a.stringify({userId:t,companyId:n}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}));case 1:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function g(e,t){return O.apply(this,arguments)}function O(){return O=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["DELETE_ADMIN"],i["a"].PUT,o.a.stringify({userId:t,companyId:n}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}));case 1:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function R(e){return _.apply(this,arguments)}function _(){return _=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["FETCH_EMPLOYEE"],i["a"].GET,{companyId:t}));case 1:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function k(e){return I.apply(this,arguments)}function I(){return I=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["FETCH_ADMIN"],i["a"].GET,{companyId:t}));case 1:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function x(e){return j.apply(this,arguments)}function j(){return j=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["SEARCH_COMPANY"],i["a"].GET,{name:t}));case 1:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function S(e,t){return E.apply(this,arguments)}function E(){return E=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["APPLICATION_PERSON"],i["a"].GET,{user_id:t,company_id:n}));case 1:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function T(e){return A.apply(this,arguments)}function A(){return A=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["DISMISS_COMPANY"],i["a"].POST,o.a.stringify({companyId:t}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}));case 1:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function C(e,t){return N.apply(this,arguments)}function N(){return N=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["QUIT_COMPANY"],i["a"].PUT,o.a.stringify({userId:t,companyId:n}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}));case 1:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function P(e){return M.apply(this,arguments)}function M(){return M=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["SEARCH_COMPANY_INFORMATION"],i["a"].GET,{userId:t}));case 1:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function K(e,t){return D.apply(this,arguments)}function D(){return D=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["e"])(a["FIRE_PERSON"],i["a"].POST,o.a.stringify({companyId:t,userIdList:n}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}));case 1:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}}}]);