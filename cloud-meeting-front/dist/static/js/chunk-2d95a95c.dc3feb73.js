(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d95a95c"],{"35fa":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{"body-style":{padding:"24px 32px",paddingBottom:"64px",textAlign:"center"},bordered:!1}},[n("img",{staticStyle:{width:"30%","min-width":"150px"},attrs:{src:r("df3f")}}),n("a-form-model",{ref:"form",attrs:{model:e.form,"label-col":{span:8},"wrapper-col":{span:10},selfUpdate:!0,rules:e.rules}},[n("a-form-model-item",{attrs:{label:"会议号",prop:"topic"}},[n("a-input",{attrs:{disabled:!0},model:{value:e.meetingNumber,callback:function(t){e.meetingNumber=t},expression:"meetingNumber"}})],1),n("a-form-model-item",{attrs:{label:"会议主题",prop:"topic"}},[n("a-input",{attrs:{placeholder:"默认为"+e.username+"预约的会议"},model:{value:e.form.topic,callback:function(t){e.$set(e.form,"topic",t)},expression:"form.topic"}},[n("a-icon",{staticStyle:{color:"#c7c7c7"},attrs:{slot:"suffix",type:"file"},slot:"suffix"})],1)],1),n("a-form-model-item",{attrs:{label:"开始时间",prop:"startTime"}},[n("a-date-picker",{staticStyle:{width:"100%"},attrs:{"show-time":"",type:"date",placeholder:"请选择开始时间","disabled-date":e.disabledDate},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),n("a-form-model-item",{attrs:{label:"会议时长",prop:"duration"}},[n("a-time-picker",{staticStyle:{width:"100%"},attrs:{format:"HH:mm",placeholder:"请选择会议时长"},model:{value:e.form.duration,callback:function(t){e.$set(e.form,"duration",t)},expression:"form.duration"}})],1),n("a-form-model-item",{attrs:{label:"会议密码",prop:"password"}},[n("a-input",{attrs:{placeholder:"默认无会议密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[n("a-icon",{staticStyle:{color:"#c7c7c7"},attrs:{slot:"suffix",type:"eye"},slot:"suffix"})],1)],1)],1),n("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("变更会议")]),n("a-button",{on:{click:e.resetForm}},[e._v("重置信息")]),n("a-modal",{attrs:{visible:e.visible,footer:null}},[n("a-result",{attrs:{status:"success",title:"您已成功变更预约的会议 "+e.meetingNumber+" ！","sub-title":e.successMsg},scopedSlots:e._u([{key:"extra",fn:function(){return[n("a-button",{key:"check",attrs:{type:"link",size:"large"},on:{click:function(t){return e.goTo("/meetingManagement/my")}}},[e._v(" 前往我的会议查看 ")]),n("span",[e._v(e._s(e.count)+"秒后跳转")])]},proxy:!0}])})],1)],1)},a=[],i=r("f3f3"),o=(r("4d63"),r("ac1f"),r("25f0"),r("c1df")),s=r.n(o),u=r("5880"),c=r("f8ae"),m={data:function(){return{form:{topic:"",startTime:"",duration:"",requiredPassword:!1,password:"",hostId:"",host:""},rules:{topic:[{max:20,message:"会议主题不要超过20字",trigger:"change"}],startTime:[{required:!0,message:"请选择开始时间",trigger:"change"}],duration:[{required:!0,message:"请选择会议时长",trigger:"change"}],password:[{pattern:new RegExp(/^[1-9]\d*$/,"g"),message:"会议密码必须为数字",trigger:"change"},{max:6,message:"会议密码必须为4-6位",trigger:"change"},{min:4,message:"会议密码必须为4-6位",trigger:"change"}]},visible:!1,meetingId:"",meetingNumber:"",count:""}},created:function(){var e=this;this.meetingId=this.$route.params.meetingId,this.meetingNumber=this.$route.params.meetingNumber;var t={meetingId:this.meetingId,meetingNumber:this.meetingNumber};Object(c["f"])(t).then((function(t){e.meetingId=t.data.id,e.meetingNumber=t.data.meetingNumber,e.form.topic=t.data.data.topic,e.form.startTime=e.moment(t.data.data.scheduledStartTime),e.form.duration=e.moment(t.data.data.scheduledEndTime-t.data.data.scheduledStartTime),e.form.hostId=t.data.data.hostId,e.form.host=t.data.data.host,e.form.hostId==e.userId&&(e.form.requiredPassword=1==t.data.data.requiredPassword,e.form.requiredPassword&&(e.form.password=t.data.data.password))}))},mounted:function(){},watch:{"form.password":{handler:function(e){this.form.requiredPassword=!!e}}},computed:Object(i["a"])(Object(i["a"])({},Object(u["mapGetters"])("account",["username","userId","companyId"])),{},{successMsg:function(){return this.form.startTime&&this.form.duration?"会议开始时间为："+this.form.startTime.toDate().toLocaleString()+" , 预计持续"+this.form.duration.toDate().getHours()+"时"+this.form.duration.toDate().getMinutes()+"分"+(this.form.requiredPassword?",\n会议密码为"+this.form.password:"。"):""}}),methods:{moment:s.a,disabledDate:function(e){var t=new Date;return t.setMinutes(t.getMinutes()+30),!(!e||!t)&&t.valueOf()>=e.valueOf()},handleSubmit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return!1;Date.prototype.clone=function(){return new Date(this.valueOf())};var r=e.form.startTime.toDate(),n=r.clone(),a=e.form.duration.toDate();n.setHours(r.getHours()+a.getHours()),n.setMinutes(r.getMinutes()+a.getMinutes());var i={meetingNumber:e.meetingNumber,meetingId:e.meetingId,topic:e.form.topic?e.form.topic:e.username+"预约的会议",scheduledStartTime:r.getTime(),scheduledEndTime:n.getTime(),hostId:e.userId,requiredPassword:e.form.requiredPassword,password:e.form.password};Object(c["b"])(i).then((function(){e.visible=!0,e.fiveSecondsGo()}))}))},resetForm:function(){this.form.topic="",this.form.startTime="",this.form.duration=s()(new Date(2013,0,0,0,30,0,0).getTime()),this.form.requiredPassword=!1,this.form.password="",this.meetingNumber="",this.meetingId=""},goTo:function(e){this.$router.go(e),this.visible=!1},fiveSecondsGo:function(){var e=this,t=5;this.timer||(this.count=t,this.show=!1,this.timer=setInterval((function(){e.count>0&&e.count<=t?e.count--:(e.show=!0,clearInterval(e.timer),e.timer=null,e.visible=!1,e.$closePage(e.$route),e.$router.push("/meetingManagement/my"))}),1e3))}}},d=m,p=r("2877"),f=Object(p["a"])(d,n,a,!1,null,"090963c7",null);t["default"]=f.exports},df3f:function(e,t,r){e.exports=r.p+"static/img/reservedMeeting.fa2afa79.png"},f8ae:function(e,t,r){"use strict";r.d(t,"e",(function(){return u})),r.d(t,"c",(function(){return m})),r.d(t,"h",(function(){return p})),r.d(t,"a",(function(){return l})),r.d(t,"d",(function(){return g})),r.d(t,"b",(function(){return w})),r.d(t,"f",(function(){return y})),r.d(t,"g",(function(){return T}));var n=r("c964"),a=(r("96cf"),r("b775")),i=r("7424"),o=r("4328"),s=r.n(o);function u(e){return c.apply(this,arguments)}function c(){return c=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["e"])(i["ROOM_RESERVATION"],a["a"].PUT,s.a.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return d=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["e"])(i["ROOM_RESERVATION"],a["a"].POST,s.a.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["e"])(i["ROOM_RESERVATION"],a["a"].GET,t));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function l(e){return h.apply(this,arguments)}function h(){return h=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["e"])(i["AVALIABLE_ROOM"],a["a"].GET,t));case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return b=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["e"])(i["COMMON_RESERVATION"],a["a"].PUT,s.a.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function w(e){return O.apply(this,arguments)}function O(){return O=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["e"])(i["COMMON_RESERVATION"],a["a"].POST,s.a.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}));case 1:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function y(e){return v.apply(this,arguments)}function v(){return v=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["e"])(i["COMMON_RESERVATION"],a["a"].GET,t));case 1:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function T(e){return x.apply(this,arguments)}function x(){return x=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a["e"])(i["SEARCH_EMPLOYEE"],a["a"].GET,t));case 1:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}}}]);